{"version":3,"file":"login.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA,6CAA6C,aAAa,EAAE,gBAAgB;AAC5E;AACA,QAAQ;AACR;AACA,sCAAsC,aAAa,EAAE,gBAAgB;AACrE;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;;;;;;;;;;;;;;;;;;;;;;;;AC7DiB;AAC6B;;AAE9C;;AAEO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA,wBAAwB,2DAAmB;AAC3C;AACA;AACA;AACA,8BAA8B,uDAAQ;AACtC,GAAG;AACH;;AAEO;AACP;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,GAAG;AACH;;AAEO;AACP;AACA;AACA;;AAEO;AACP,2BAA2B,2DAAmB;;AAE9C;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;;AAEA;;AAEO;AACP;AACA;AACA;;AAEO;AACP,sBAAsB,2DAAmB;AACzC,kBAAkB,2DAAmB;;AAErC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACxKwC;;AAExC;;AAEO;AACP;AACA,gDAAgD,iBAAiB;AACjE,8CAA8C,kBAAkB;AAChE,8CAA8C,gBAAgB;AAC9D,yBAAyB,KAAK,GAAG,GAAG,GAAG,GAAG;;AAE1C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP,6BAA6B,aAAa;AAC1C;;AAEA;;AAEO;AACP;AACA,IAAI,qDAAU;AACd,IAAI,qDAAU;AACd;AACA;;AAEA;;AAEO;AACP;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;AACH;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA,sBAAsB,cAAc,GAAG,cAAc,GAAG,cAAc;AACtE,sBAAsB,cAAc,GAAG,cAAc,GAAG,cAAc;;AAEtE;;AAEA;AACA;;AAEA;;AAEO;AACP;AACA;AACA;;;;;;;;;;;AC/GO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,0CAA0C,UAAU;;AAEpD;AACA;;AAEA;AACA;AACA,kCAAkC,YAAY;AAC9C;AACA;AACA;;AAEA;AACA;;;;;;UCxCA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;ACNkD;AACE;;AAEpD;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG,IAAI;;AAEP,uBAAuB,gEAAwB;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ,IAAI,8DAAY;AAChB;AACA;AACA;AACA","sources":["webpack://webpack-starter-kit/./src/apiCalls.js","webpack://webpack-starter-kit/./src/domManipulation.js","webpack://webpack-starter-kit/./src/model.js","webpack://webpack-starter-kit/./src/trips/trips-card.js","webpack://webpack-starter-kit/webpack/bootstrap","webpack://webpack-starter-kit/webpack/runtime/define property getters","webpack://webpack-starter-kit/webpack/runtime/hasOwnProperty shorthand","webpack://webpack-starter-kit/webpack/runtime/make namespace object","webpack://webpack-starter-kit/./src/login/login.js"],"sourcesContent":["export function getAPIData(url) {\n  return fetch(url)\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n\n      if (res.status >= 500) {\n        throw new Error(\"There's been a network error: \");\n      }\n    })\n    .then(data => data)\n    .catch(err => console.log(err));\n}\n\nexport function postFlightRequest(\n  url,\n  previousTripID,\n  userID,\n  destinationID,\n  travelers,\n  date,\n  duration,\n) {\n  return fetch(url, {\n    method: 'POST',\n    body: JSON.stringify({\n      id: previousTripID + 1,\n      userID,\n      destinationID,\n      travelers,\n      date,\n      duration,\n      status: 'pending',\n      suggestedActivities: [],\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n    .then(resp => {\n      if (resp.ok) {\n        return resp.json();\n      }\n\n      if (resp.status === 400) {\n        throw new Error('There has been a user error.');\n      } else if (resp.status === 422 || resp.status === 404) {\n        throw new Error(\n          'The POST request is missing some information.',\n        );\n      } else if (resp.status >= 500) {\n        throw new Error(\n          `There has been a network error: ${resp.status} ${resp.statusText}. Please refresh the page or try again later.`,\n        );\n      } else {\n        throw new Error(\n          `There has been an error: ${resp.status} ${resp.statusText}.`,\n        );\n      }\n    })\n    .then(data => data)\n    .catch(err => {\n      console.error(err);\n    });\n}\n","import {\n  calcTotalCostOfTrip,\n  findDestinationByID,\n  getDestinationNames,\n} from './model';\nimport { TripCard } from './trips/trips-card';\n\n/* -------------- Header -------------- */\n\nexport function displayUserName(username) {\n  const userNameEl = document.querySelector('.user-name');\n  userNameEl.innerText = username;\n}\n\n/* -------------- Request Form Inputs -------------- */\n\nconst requestFormDestinationInput = document.querySelector('#destination');\nconst dropdownOpts = document.querySelector('.dropdown-options');\nconst dateInputs = document.querySelectorAll('input[type=\"date\"]');\n\nexport function displayFilteredTrips(tripData, criteria) {\n  const resultsEl = document.querySelector('.results-container');\n  resultsEl.innerHTML = '';\n\n  tripData.trips.forEach(trip => {\n    const destination = findDestinationByID(\n      tripData.destinations,\n      trip.destinationID,\n    );\n    resultsEl.appendChild(new TripCard(trip, destination, criteria));\n  });\n}\n\nexport function displaySelectedFilterOption(criteria) {\n  const btns = document.querySelectorAll('.filter-btn');\n\n  btns.forEach(btn => {\n    if (btn.id === criteria) {\n      btn.classList.add('selected');\n    } else {\n      btn.classList.remove('selected');\n    }\n  });\n}\n\nexport function displayTotalSpent(total) {\n  const totalSpentContainer = document.querySelector('.total-spent');\n  const totalSpentEl = document.querySelector('.total-spent-value');\n  totalSpentEl.innerText = total.toLocaleString('en-US');\n  totalSpentContainer.setAttribute('tabindex', 0);\n}\n\nexport function renderAllDestinationOptions(destinations) {\n  dropdownOpts.innerHTML = '';\n  if (requestFormDestinationInput.value) {\n    destinations = destinations.filter(dest =>\n      dest.destination.includes(requestFormDestinationInput.value),\n    );\n  }\n\n  destinations.forEach(dest => {\n    dropdownOpts.appendChild(new FormOption(dest));\n  });\n}\n\nfunction FormOption(destination) {\n  const destOption = document.createElement('p');\n  destOption.innerText = destination.destination;\n  destOption.setAttribute('tabindex', 0);\n\n  destOption.onclick = () => {\n    requestFormDestinationInput.value = destOption.innerText;\n  };\n\n  destOption.onkeypress = e => {\n    if (e.key === 'Enter' || e.keyCode === 13) {\n      e.target.click();\n      dateInputs[0].focus();\n      dropdownOpts.style.display = 'none';\n    }\n  };\n\n  return destOption;\n}\nexport function handleFormKeyboardInput() {\n  requestFormDestinationInput.onkeypress = e => {\n    e.preventDefault();\n    if (e.key === 'Enter' || e.keyCode === 13) {\n      dropdownOpts.style.display = 'block';\n    } else {\n      requestFormDestinationInput.value += e.key;\n    }\n  };\n}\n\nexport function setMinDateOption() {\n  dateInputs.forEach(input => {\n    input.min = new Date().toISOString().split('T')[0];\n  });\n}\n\nexport function displayError(err) {\n  const errMsg = document.querySelector('.error-message');\n  errMsg.innerText = err;\n}\n\nexport function InputValidator(destinations) {\n  const destinationNames = getDestinationNames(destinations);\n\n  return {\n    validateDestinationInput(value) {\n      if (destinationNames.includes(value)) {\n        // set field to valid\n        requestFormDestinationInput.setCustomValidity('');\n      } else {\n        // set field to invalid\n        requestFormDestinationInput.setCustomValidity('Invalid field.');\n      }\n    },\n  };\n}\n\nexport function navigateToPending() {\n  window.location.href = 'trips.html';\n}\n\n/* -------------- Confirmation Page -------------- */\n\nexport function toggleConfirmationPage() {\n  const confPage = document.querySelector('.confirmation-page-container');\n  confPage.classList.toggle('collapsed');\n}\n\nexport function populateConfirmationPageData(destinations, request) {\n  const destination = findDestinationByID(destinations, request.destID);\n  const figures = calcTotalCostOfTrip(request, destination);\n\n  const tripTotal = document.querySelector('.trip-total');\n  tripTotal.innerText = figures.total.toLocaleString('en-US');\n\n  const destinationEl = document.querySelector('.destination-value');\n  destinationEl.innerText = destination.destination;\n\n  const flightCost = document.querySelector('.flight-cost');\n  flightCost.innerText =\n    destination.estimatedFlightCostPerPerson.toLocaleString('en-US');\n\n  const flightCostTotal = document.querySelector('.flight-cost-total');\n  flightCostTotal.innerText = figures.flightCost.toLocaleString('en-US');\n\n  const livingExpenseCost = document.querySelector('.living-expense-cost');\n  livingExpenseCost.innerText =\n    destination.estimatedLodgingCostPerDay.toLocaleString('en-US');\n\n  const pax = document.querySelector('.num-of-pax');\n  pax.innerText = request.travelers;\n\n  const livingExpenseTotal = document.querySelector('.living-expense-total');\n  livingExpenseTotal.innerText = figures.lodgingCost.toLocaleString('en-US');\n\n  const subTotal = document.querySelector('.subtotal');\n  subTotal.innerText = figures.subTotal.toLocaleString('en-US');\n\n  const agentFee = document.querySelector('.agent-fee-cost');\n  agentFee.innerText = figures.agentFee.toLocaleString('en-US');\n\n  const grandTotal = document.querySelector('.grand-total-cost');\n  grandTotal.innerText = figures.total.toLocaleString('en-US');\n}\n","import { getAPIData } from './apiCalls';\n\n/* -------------- Utility -------------- */\n\nexport function filterTrips(tripData, criteria, travelerID, year = '2023') {\n  const date = new Date();\n  const yyyy = date.toLocaleString('default', { year: 'numeric' });\n  const mm = date.toLocaleString('default', { month: '2-digit' });\n  const dd = date.toLocaleString('default', { day: '2-digit' });\n  const currentDate = `${yyyy}/${mm}/${dd}`;\n\n  tripData = tripData\n    .filter(trip => trip.userID === travelerID)\n    .sort((a, b) => new Date(b.date) - new Date(a.date));\n\n  switch (criteria) {\n    case 'byYear':\n      return tripData.filter(trip => trip.date.slice(0, 4) === year);\n    case 'past':\n      return tripData.filter(\n        trip => trip.date < currentDate && trip.status !== 'pending',\n      );\n    case 'upcoming':\n      return tripData.filter(\n        trip => trip.date > currentDate && trip.status === 'approved',\n      );\n    case 'pending':\n      return tripData\n        .filter(trip => trip.status === 'pending')\n        .sort((a, b) => new Date(a.date) - new Date(b.date));\n    default:\n      return tripData;\n  }\n}\n\nexport function findDestinationByID(destinations, destID) {\n  return destinations.find(dest => dest.id === destID);\n}\n\nexport function findIDByDestination(destinations, destName) {\n  const destinationNames = getDestinationNames(destinations);\n  if (!destinationNames.includes(destName)) {\n    return false;\n  }\n\n  return destinations.find(dest => dest.destination === destName).id;\n}\n\nexport function getDestinationNames(destinations) {\n  return destinations.map(({ destination }) => destination);\n}\n\n/* -------------- Generic Fetch Call -------------- */\n\nexport function getAllAPIData() {\n  return Promise.all([\n    getAPIData('http://localhost:3001/api/v1/trips'),\n    getAPIData('http://localhost:3001/api/v1/destinations'),\n  ]).then(values => values);\n}\n\n/* -------------- Calculation -------------- */\n\nexport function calcTotalSpentByYear(userID, trips, destinations, year) {\n  return filterTrips(trips, 'byYear', userID, year).reduce((acc, trip) => {\n    const destination = findDestinationByID(destinations, trip.destinationID);\n    const total = calcTotalCostOfTrip(trip, destination);\n\n    acc += total.total;\n\n    return acc;\n  }, 0);\n}\n\nexport function calcTotalCostOfTrip(trip, destination) {\n  const flightCost =\n    trip.travelers * (destination.estimatedFlightCostPerPerson * 2);\n\n  const lodgingCost =\n    trip.duration * destination.estimatedLodgingCostPerDay * trip.travelers;\n  const subTotal = flightCost + lodgingCost;\n  const agentFee = subTotal * 0.1;\n  const total = subTotal + agentFee;\n\n  return {\n    flightCost,\n    lodgingCost,\n    subTotal,\n    agentFee,\n    total,\n  };\n}\n\nexport function calcTimeDifference(date1, date2) {\n  // Dates are passed in in the format yyyy-mm-dd\n  const splitDate1 = date1.split('-');\n  const splitDate2 = date2.split('-');\n  // Date object needs date format to be mm/dd/yyyy\n  date1 = new Date(`${splitDate1[1]}/${splitDate1[2]}/${splitDate1[0]}`);\n  date2 = new Date(`${splitDate2[1]}/${splitDate2[2]}/${splitDate2[0]}`);\n\n  const diffInMs = Math.abs(date1 - date2);\n\n  return diffInMs / (1000 * 60 * 60 * 24);\n}\n\n/* -------------- Login -------------- */\n\nexport function validateLoginCredentials(username, password) {\n  const regex = '^traveler(?:[1-9]|[1-4][0-9]|50)$';\n  return username.match(regex) && password === 'travel';\n}\n","export function TripCard(trip, destination, criteria) {\n  const card = document.createElement('article');\n  card.id = trip.id;\n  card.classList.add('trip-card');\n  card.setAttribute('tabindex', 0);\n\n  const imgContainer = document.createElement('div');\n  imgContainer.classList.add('img-container');\n  card.appendChild(imgContainer);\n\n  const destinationImg = document.createElement('img');\n  destinationImg.src = destination.image;\n  destinationImg.alt = destination.alt;\n  imgContainer.appendChild(destinationImg);\n  destinationImg.setAttribute('tabindex', 0);\n\n  const dataContainer = document.createElement('div');\n  dataContainer.classList.add('card-data-container');\n  card.appendChild(dataContainer);\n\n  const destinationTitle = document.createElement('h2');\n  destinationTitle.innerText = destination.destination;\n  dataContainer.appendChild(destinationTitle);\n  destinationTitle.setAttribute('tabindex', 0);\n\n  const lastVisitDate = document.createElement('p');\n\n  lastVisitDate.innerText = `Trip date: ${trip.date}`;\n\n  dataContainer.appendChild(lastVisitDate);\n  lastVisitDate.setAttribute('tabindex', 0);\n\n  if (criteria !== 'past') {\n    const status = document.createElement('p');\n    status.innerText = `Status: ${trip.status}`;\n    status.setAttribute('tabindex', 0);\n    dataContainer.appendChild(status);\n  }\n\n  return card;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { displayError } from '../domManipulation';\nimport { validateLoginCredentials } from '../model';\n\n// Query Selectors\n\nconst loginForm = document.querySelector('#login-form');\n\n// Event Listeners\n\nloginForm.onsubmit = e => {\n  e.preventDefault();\n\n  const formData = new FormData(loginForm);\n  const loginData = [...formData.entries()].reduce((acc, input) => {\n    acc[input[0]] = input[1];\n    return acc;\n  }, {});\n\n  const loginIsValid = validateLoginCredentials(\n    loginData.username,\n    loginData.password,\n  );\n\n  if (loginIsValid) {\n    localStorage.setItem('currentUserID', loginData.username.slice(8));\n    window.location.href = 'home.html';\n  } else {\n    displayError(\n      'Incorrect username or password. Please double-check and try again or reach out to josh@vantagejets.com for assistance.',\n    );\n  }\n};\n"],"names":[],"sourceRoot":""}